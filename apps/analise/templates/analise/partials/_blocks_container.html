<!-- Container de Blocos (usado para recarregar via HTMX) -->

<!-- KPIs atualizados -->
<div class="mb-6">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4">
    
    <!-- Processos Pendentes -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-orange-50 border border-orange-200">
      <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-orange-700 truncate">{{ kpis.pendentes.label }}</p>
        <p class="text-lg font-bold text-orange-900">{{ kpis.pendentes.valor }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.pendentes.variacao > 0 %}
            <span class="text-red-600">+{{ kpis.pendentes.variacao }}%</span>
          {% elif kpis.pendentes.variacao < 0 %}
            <span class="text-green-600">{{ kpis.pendentes.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Em Análise -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-blue-50 border border-blue-200">
      <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-blue-700 truncate">{{ kpis.em_analise.label }}</p>
        <p class="text-lg font-bold text-blue-900">{{ kpis.em_analise.valor }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.em_analise.variacao > 0 %}
            <span class="text-blue-600">+{{ kpis.em_analise.variacao }}%</span>
          {% elif kpis.em_analise.variacao < 0 %}
            <span class="text-blue-600">{{ kpis.em_analise.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Aprovados -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-green-50 border border-green-200">
      <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-green-700 truncate">{{ kpis.aprovados.label }}</p>
        <p class="text-lg font-bold text-green-900">{{ kpis.aprovados.valor }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.aprovados.variacao > 0 %}
            <span class="text-green-600">+{{ kpis.aprovados.variacao }}%</span>
          {% elif kpis.aprovados.variacao < 0 %}
            <span class="text-red-600">{{ kpis.aprovados.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Tempo Médio -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-purple-50 border border-purple-200">
      <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-purple-700 truncate">{{ kpis.tempo_medio.label }}</p>
        <p class="text-lg font-bold text-purple-900">{{ kpis.tempo_medio.valor }}{{ kpis.tempo_medio.sufixo|default:"" }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.tempo_medio.variacao > 0 %}
            <span class="text-red-600">+{{ kpis.tempo_medio.variacao }}%</span>
          {% elif kpis.tempo_medio.variacao < 0 %}
            <span class="text-green-600">{{ kpis.tempo_medio.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Taxa de Aprovação -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-indigo-50 border border-indigo-200">
      <div class="w-10 h-10 bg-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-indigo-700 truncate">{{ kpis.taxa_aprovacao.label }}</p>
        <p class="text-lg font-bold text-indigo-900">{{ kpis.taxa_aprovacao.valor }}{{ kpis.taxa_aprovacao.sufixo|default:"" }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.taxa_aprovacao.variacao > 0 %}
            <span class="text-green-600">+{{ kpis.taxa_aprovacao.variacao }}%</span>
          {% elif kpis.taxa_aprovacao.variacao < 0 %}
            <span class="text-red-600">{{ kpis.taxa_aprovacao.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Em Atraso -->
    <div class="flex items-center space-x-3 p-3 rounded-lg bg-red-50 border border-red-200">
      <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
        </svg>
      </div>
      <div class="min-w-0 flex-1">
        <p class="text-xs font-medium text-red-700 truncate">{{ kpis.em_atraso.label }}</p>
        <p class="text-lg font-bold text-red-900">{{ kpis.em_atraso.valor }}</p>
        <div class="flex items-center text-xs">
          {% if kpis.em_atraso.variacao > 0 %}
            <span class="text-red-600">+{{ kpis.em_atraso.variacao }}%</span>
          {% elif kpis.em_atraso.variacao < 0 %}
            <span class="text-green-600">{{ kpis.em_atraso.variacao }}%</span>
          {% else %}
            <span class="text-gray-500">0%</span>
          {% endif %}
        </div>
      </div>
    </div>

  </div>
</div>

<div class="space-y-6">
  <!-- Bloco Pendentes -->
  {% if not request.GET.status or request.GET.status == 'pendente' %}
  <div id="block-pendentes"
       hx-get="{% url 'analise:esteira_block' %}?block=pendentes&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Pendentes...</div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Bloco Em Análise -->
  {% if not request.GET.status or request.GET.status == 'em_analise' %}
  <div id="block-em_analise"
       hx-get="{% url 'analise:esteira_block' %}?block=em_analise&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Em Análise...</div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Bloco Em Correção -->
  {% if not request.GET.status or request.GET.status == 'em_correcao' %}
  <div id="block-em_correcao"
       hx-get="{% url 'analise:esteira_block' %}?block=em_correcao&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Em Correção...</div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Bloco Correção Realizada -->
  {% if not request.GET.status or request.GET.status == 'correcao_realizada' %}
  <div id="block-correcao_realizada"
       hx-get="{% url 'analise:esteira_block' %}?block=correcao_realizada&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Correção Realizada...</div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Bloco Efetivados -->
  {% if not request.GET.status or request.GET.status == 'aprovado' %}
  <div id="block-efetivados"
       hx-get="{% url 'analise:esteira_block' %}?block=efetivados&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Efetivados...</div>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Bloco Cancelados -->
  {% if not request.GET.status or request.GET.status == 'cancelado' %}
  <div id="block-cancelados"
       hx-get="{% url 'analise:esteira_block' %}?block=cancelados&{{ request.GET.urlencode }}"
       hx-trigger="load"
       hx-swap="outerHTML">
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
      <div class="flex items-center justify-center h-20">
        <div class="text-gray-500">Carregando Cancelados...</div>
      </div>
    </div>
  </div>
  {% endif %}
</div>